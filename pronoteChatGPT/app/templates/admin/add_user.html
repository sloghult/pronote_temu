{% extends "base.html" %}
{% block content %}
<form method="POST">
    <label for="role">Rôle :</label>
    <select name="role" id="role">
        <option value="eleve">Élève</option>
        <option value="prof">Professeur</option>
    </select>

    <label for="username">Nom d'utilisateur :</label>
    <input type="text" name="username" required>

    <label for="email">Email :</label>
    <input type="email" name="email" required>

    <label for="password">Mot de passe :</label>
    <input type="password" name="password" required>

    <div id="eleve_fields" style="display: none;">
        <label for="nom">Nom :</label>
        <input type="text" name="nom">

        <label for="prenom">Prénom :</label>
        <input type="text" name="prenom">

        <label for="classe_id">Classe :</label>
        <select name="classe_id">
            {% for id, classe in classes %}
                <option value="{{ id }}">{{ classe }}</option>
            {% endfor %}
        </select>
    </div>

    <div id="prof_fields" style="display: none;">
        <label for="nom">Nom :</label>
        <input type="text" name="nomp">

        <label for="matiere1">Matière 1 :</label>
        <select name="matiere1">
            {% for id, nom_matiere in matieres %}
                <option value="{{ id }}">{{ nom_matiere }}</option>
            {% endfor %}
        </select>
        <label for="matiere2">Matière 2 :</label>
        <select name="matiere2">
            {% for id, nom_matiere in matieres %}
                <option value="{{ id }}">{{ nom_matiere }}</option>
            {% endfor %}
        </select>
        <label for="matiere3">Matière 3 :</label>
        <select name="matiere3">
            {% for id, nom_matiere in matieres %}
                <option value="{{ id }}">{{ nom_matiere }}</option>
            {% endfor %}
        </select>

        <label for="classe1">Classe enseignée 1 :</label>
        <select name="classe1">
            {% for id, classe in classes %}
                <option value="{{ id }}">{{ classe }}</option>
            {% endfor %}
        </select>
        <label for="classe2">Classe enseignée 2 :</label>
        <select name="classe2">
            {% for id, classe in classes %}
                <option value="{{ id }}">{{ classe }}</option>
            {% endfor %}
        </select>
        <label for="classe3">Classe enseignée 3 :</label>
        <select name="classe3">
            {% for id, classe in classes %}
                <option value="{{ id }}">{{ classe }}</option>
            {% endfor %}
        </select>
    </div>

    <button type="submit">Ajouter</button>
</form>

<script>
    document.getElementById("role").addEventListener("change", function() {
        var role = this.value;
        document.getElementById("eleve_fields").style.display = (role === "eleve") ? "block" : "none";
        document.getElementById("prof_fields").style.display = (role === "prof") ? "block" : "none";
    });
</script>
{% endblock %}
